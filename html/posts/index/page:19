<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"> 
<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
	<title>Blog &raquo; Debuggable - Node.js Consulting</title>

	<link href="http://feeds.feedburner.com/debuggable" type="application/rss+xml" rel="alternate" title="RSS 2.0" />	<link rel="pingback" href="Debuggable.com/pingback" />
	<link rel="stylesheet" type="text/css" href="/css/aggregate/58a4727fb2207154ddd0739cbc3b15104ad6cd03/4026ee2275e22a4e5ec8aea13747c557.php" /></head>
	<body>
		<div class="container_16">
			<h1 id="logo-text"><a href="/">debuggable</a></h1>
			<ul id="navigation">
				<ul>
<li class="active"><a href="/blog">Blog</a></li><li class=""><a href="/">About</a></li></ul>			</ul>
			<div class="clear">&nbsp;</div>

			<div id="blueprint">
				<a href="/contact" class="contact">Contact Us</a>			</div>

			<div class="clear">&nbsp;</div>
			<div class="grid_11 alpha" id="content">
	<cake:nocache>
			<div class="messages empty"></div>
	</cake:nocache>
	<div class="paging">
	<a href="/posts/index/page:18" class="prev">&laquo; Previous</a> <span><a href="/posts/index/page:15">15</a></span> | <span><a href="/posts/index/page:16">16</a></span> | <span><a href="/posts/index/page:17">17</a></span> | <span><a href="/posts/index/page:18">18</a></span> | <span class="current">19</span> | <span><a href="/posts/index/page:20">20</a></span> | <span><a href="/posts/index/page:21">21</a></span> | <span><a href="/posts/index/page:22">22</a></span> | <span><a href="/posts/index/page:23">23</a></span> <a href="/posts/index/page:20" class="next">Next &raquo;</a></div>
	<div class="post">
	<h2><a href="/posts/cakephp-argentina:4937042e-4864-48e1-98f0-6d3d4834cda3">CakePHP Argentina</a></h2>	<div class="posted-on">
		<p>Posted on 3/12/08 by 
		<a href="/felix">Felix Geisendörfer</a>				</p>
		<div class="thumb">
			<img alt="" src="/img/felix_thumb.jpg"/>		</div>
	</div>
	<div class="body">
				<p>Sry folks, the tubes here in Argentina are pretty jammed sometimes. But Mark Story is <a href="http://www.cakedc.com/articles">live covering the whole event</a>. Check it out and use it to convince your guiding powers for attending the next fest.</p>
<p>Will upload pictures and stuff here soon as well : ).</p>
<p>-- Felix Geisendörfer aka the_undefined<br />
<img style="display: none;" src="http://debuggable.com/posts/tick/4937042e-4864-48e1-98f0-6d3d4834cda3"></p>
	</div>
	<div class="clear">&nbsp;</div>
	<div class="social">
	<p class="subscribe">Did you like this blog post? If so, please consider <a href="http://feeds.feedburner.com/debuggable">subscribing to the Blog RSS feed</a>.</p>

	<ul>
	<li class="sociablefirst">
				<a class="linkedin" title="LinkedIn" href="javascript:window.location='http://www.linkedin.com/shareArticle?mini=true&amp;url=http%3A%2F%2Fdebuggable.com%2Fposts%2Fcakephp-argentina%3A4937042e-4864-48e1-98f0-6d3d4834cda3 &amp;title=CakePHP+Argentina';" rel="nofollow">
			<img class="sociable-hovers" alt="Linked In" title="Linked In" src="/img/social_icons/linkedin.png"/>
		</a>
	</li>
	<li>
		<a class="sphinn" title="Sphinn" href="javascript:window.location='http://sphinn.com/index.php?c=post&amp;m=submit&amp;link=http%3A%2F%2Fdebuggable.com%2Fposts%2Fcakephp-argentina%3A4937042e-4864-48e1-98f0-6d3d4834cda3';" rel="nofollow">
		<img class="sociable-hovers" alt="Sphinn" title="Sphinn" src="/img/social_icons/sphinn.png"/>
		</a>
	</li>
	<li>
		<a class="digg" title="Digg" href="javascript:window.location='http://digg.com/submit?url=http%3A%2F%2Fdebuggable.com%2Fposts%2Fcakephp-argentina%3A4937042e-4864-48e1-98f0-6d3d4834cda3&amp;title=CakePHP+Argentina&amp;bodytext=+..&amp;media=News&amp;topic=Programming';" rel="nofollow">
		<img class="sociable-hovers" alt="Digg" title="Digg" src="/img/social_icons/digg.png"/>
		</a>
	</li>
	<li>
	<a class="del.icio.us" title="del.icio.us" href="javascript:window.location='http://delicious.com/post?url=http%3A%2F%2Fdebuggable.com%2Fposts%2Fcakephp-argentina%3A4937042e-4864-48e1-98f0-6d3d4834cda3&amp;title=CakePHP+Argentina';" rel="nofollow">
		<img class="sociable-hovers" alt="Delicious" title="Delicious" src="/img/social_icons/delicious.png"/>
	</a>
	</li>
	<li class="sociablelast">
		<a class="stumbleupon" title="StumbleUpon" href="javascript:window.location='http://www.stumbleupon.com/submit?url=http%253A%252F%252Fyoast.com%252F40-wordpress-optimisation-tips%252F&amp;title=40%2520WordPress%2520Optimisation%2520tips';" rel="nofollow">
		<img class="sociable-hovers" alt="StumbleUpon" title="StumbleUpon" src="/img/social_icons/stumbleupon.png"/>
		</a>
	</li>
	</ul>
</div>

	
	<div class="post-footer">
		<img src="/css/img/comments.png" alt="Comments"> <a href="/posts/cakephp-argentina:4937042e-4864-48e1-98f0-6d3d4834cda3">3 Comments</a> &nbsp; | &nbsp; 
		<img src="/css/img/add_comment.png" alt="Add Comment"> <a href="/posts/cakephp-argentina:4937042e-4864-48e1-98f0-6d3d4834cda3#CommentAddForm">Add Comment</a>	</div>
	</div>
<div class="post">
	<h2><a href="/posts/how-to-paginate-a-search-using-the-cakephp-framework:48fc5f77-38d0-41e0-b711-77c64834cda3">How to paginate a CakePHP search over a HABTM relation without hacking the core</a></h2>	<div class="posted-on">
		<p>Posted on 21/11/08 by 
		<a href="/tim">Tim Koschützki</a>				</p>
		<div class="thumb">
			<img alt="" src="/img/tim_thumb.jpg"/>		</div>
	</div>
	<div class="body">
				<p>Hey folks,</p>
<p>this post is going to deal with the pretty common problem of paginating a search with the <a href="http://cakephp.org">CakePHP framework</a>. </p>
<h3>The Problem</h3>
<p>The problem is that a user inputs some search criteria into a form, the resultset exceeds 30 rows for example and the user must be able to browse through the resultset via different pages. The search criteria has to be the same everytime, the form prepopulated with the used search keywords/data and the resultset still has to match the input conditions everytime a new page is clicked.</p>
<p>This problem itself is in fact not much of a problem. We just need to store the form conditions somewhere and then hack it together. So what we are going to do is that we raise the difficulty bar a lot more by trying to get the pagination work over a HABTM relation.</p>
<h3>Battlefield Briefing</h3>
<p>We agreed we need to store the search criteria somewhere, so we can access it later. No we won't use the DB for that as it is overkill. We will also not use files, since many users may use the search at the same time screwing our hd. :P Yes, we will use the session for that as it is made exactly for these things.</p>
<p>For the example code we are going to use the "Advanced Search" of <a href="http://flashfun247.com">Flashfun247</a>, a flashgame site which is one of my freetime projects. If you want to see some more of its code, feel free to ask.</p>
<p>We want to search for games based on some input conditions. The Game model is related to the GameCategory model over a HABTM relation, so the same game can be in many categories and a category contains many games. CakePHP's paginator cannot handle pagination over a HABTM so well in its current version. The incident here is that we want every game listed only once in the resultset - and not n times, where n is the number of categories it belongs to.</p>
<p>So we must at some point include a group by statement. However, the paginator will use that group by statement for its internal find('count') call as well, which it does to determine the size of the resultset. This will in fact corrupt the page count screwing us all over. We will see that we can trick the paginator, though. ; )</p>
<h3>The View</h3>
<p>To get us started, let's have a look at the view in /views/searches/advanced.ctp, which is very simple:</p>
<div class="clear"></div>
<div class="code debuggable_sh_php" style="white-space: wrap;white-space: nowrap;">
&lt;h1&gt;&lt;?php <a href="http://www.php.net/echo"><span class="kw3">echo</span></a> <span class="re0">$this</span>-&gt;<span class="me1">pageTitle</span> = <span class="st0">'Advanced Game Search'</span>; <span class="kw2">?&gt;</span>&lt;/h1&gt;<br />
<span class="kw2">&lt;?php</span><br />
<span class="re0">$html</span>-&gt;<span class="me1">addCrumb</span><span class="br0">&#40;</span><span class="re0">$this</span>-&gt;<span class="me1">pageTitle</span><span class="br0">&#41;</span>;<br />
<a href="http://www.php.net/echo"><span class="kw3">echo</span></a> <span class="re0">$form</span>-&gt;<span class="me1">create</span><span class="br0">&#40;</span><span class="st0">'Search'</span>, <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="st0">'action'</span> =&gt; <span class="st0">'advanced'</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;<br />
<br />
<span class="kw1">if</span> <span class="br0">&#40;</span><a href="http://www.php.net/isset"><span class="kw3">isset</span></a><span class="br0">&#40;</span><span class="re0">$formData</span><span class="br0">&#41;</span> &amp;&amp; !<a href="http://www.php.net/empty"><span class="kw3">empty</span></a><span class="br0">&#40;</span><span class="re0">$formData</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span><br />
&nbsp; <span class="re0">$form</span>-&gt;<span class="me1">data</span> = <span class="re0">$formData</span>;<br />
<span class="br0">&#125;</span><br />
<br />
<a href="http://www.php.net/echo"><span class="kw3">echo</span></a> <span class="re0">$form</span>-&gt;<span class="me1">input</span><span class="br0">&#40;</span><span class="st0">'game_category_id'</span>, <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="st0">'label'</span> =&gt; <span class="st0">'Category:'</span>, <span class="st0">'options'</span> =&gt; <span class="re0">$searchCategories</span>, <span class="st0">'empty'</span> =&gt; <span class="st0">'All Categories'</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;<br />
<a href="http://www.php.net/echo"><span class="kw3">echo</span></a> <span class="re0">$form</span>-&gt;<span class="me1">input</span><span class="br0">&#40;</span><span class="st0">'keywords'</span>, <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="st0">'label'</span> =&gt; <span class="st0">'Text from game name, description or instructions:'</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;<br />
<a href="http://www.php.net/echo"><span class="kw3">echo</span></a> <span class="re0">$form</span>-&gt;<span class="me1">input</span><span class="br0">&#40;</span><span class="st0">'tags'</span>, <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="st0">'label'</span> =&gt; <span class="st0">'Is tagged with (separate tags by comma):'</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;<br />
<span class="re0">$orderOptions</span> = <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><br />
&nbsp; <span class="st0">'Game.name'</span> =&gt; <span class="st0">'Name'</span>,<br />
&nbsp; <span class="st0">'GameCategory.name'</span> =&gt; <span class="st0">'Game Category'</span>,<br />
&nbsp; <span class="st0">'Game.avg_rating'</span> =&gt; <span class="st0">'Game Rating'</span>,<br />
&nbsp; <span class="st0">'Game.clicks'</span> =&gt; <span class="st0">'Number of Plays'</span>,<br />
<span class="br0">&#41;</span>;<br />
<a href="http://www.php.net/echo"><span class="kw3">echo</span></a> <span class="re0">$form</span>-&gt;<span class="me1">input</span><span class="br0">&#40;</span><span class="st0">'order_by'</span>, <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="st0">'label'</span> =&gt; <span class="st0">'Order Results By:'</span>, <span class="st0">'options'</span> =&gt; <span class="re0">$orderOptions</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;<br />
<a href="http://www.php.net/echo"><span class="kw3">echo</span></a> <span class="re0">$form</span>-&gt;<span class="me1">input</span><span class="br0">&#40;</span><span class="st0">'order_dir'</span>, <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="st0">'label'</span> =&gt; <span class="st0">'Direction:'</span>, <span class="st0">'options'</span> =&gt; <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="st0">'asc'</span> =&gt; <span class="st0">'Ascending'</span>, <span class="st0">'desc'</span> =&gt; <span class="st0">'Descending'</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;<br />
<span class="kw2">?&gt;</span><br />
&lt;div class=&quot;clear&quot;&gt;&lt;/div&gt;<br />
<span class="kw2">&lt;?php</span> <a href="http://www.php.net/echo"><span class="kw3">echo</span></a> <span class="re0">$form</span>-&gt;<span class="me1">end</span><span class="br0">&#40;</span><span class="st0">'Search'</span>, <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="st0">'action'</span> =&gt; <span class="st0">'search'</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="kw2">?&gt;</span><br />
<br />
<span class="kw2">&lt;?php</span> <span class="kw1">if</span> <span class="br0">&#40;</span><a href="http://www.php.net/isset"><span class="kw3">isset</span></a><span class="br0">&#40;</span><span class="re0">$games</span><span class="br0">&#41;</span><span class="br0">&#41;</span> : <span class="kw2">?&gt;</span><br />
&nbsp; &lt;div class=&quot;clear&quot;&gt;&lt;/div&gt;<br />
<br />
&nbsp; <span class="kw2">&lt;?php</span> <span class="kw1">if</span> <span class="br0">&#40;</span>!<a href="http://www.php.net/empty"><span class="kw3">empty</span></a><span class="br0">&#40;</span><span class="re0">$games</span><span class="br0">&#41;</span><span class="br0">&#41;</span> : <span class="kw2">?&gt;</span><br />
&nbsp; &nbsp; <span class="kw2">&lt;?php</span> <a href="http://www.php.net/echo"><span class="kw3">echo</span></a> <span class="re0">$this</span>-&gt;<span class="me1">element</span><span class="br0">&#40;</span><span class="st0">'../games/list'</span>, <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="st0">'games'</span> =&gt; <span class="re0">$games</span>, <span class="st0">'hilite'</span> =&gt; <span class="re0">$query</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="kw2">?&gt;</span><br />
&nbsp; &nbsp; &lt;div class=&quot;clear&quot;&gt;&lt;/div&gt;<br />
&nbsp; &nbsp; <span class="kw2">&lt;?php</span> <a href="http://www.php.net/echo"><span class="kw3">echo</span></a> <span class="re0">$this</span>-&gt;<span class="me1">element</span><span class="br0">&#40;</span><span class="st0">'paging'</span>, <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="st0">'model'</span> =&gt; <span class="st0">'GameCategoriesGame'</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="kw2">?&gt;</span><br />
&nbsp; <span class="kw2">&lt;?php</span> <span class="kw1">else</span> : <span class="kw2">?&gt;</span><br />
&nbsp; &nbsp; &lt;p class=&quot;error-message&quot;&gt;Sorry, your search returned no results&lt;/p&gt;<br />
&nbsp; <span class="kw2">&lt;?php</span> <span class="kw1">endif</span>; <span class="kw2">?&gt;</span><br />
<span class="kw2">&lt;?php</span> <span class="kw1">endif</span>; <span class="kw2">?&gt;</span></div>
<p>It should be pretty straightforward. The only weird thing here is that $formData array. It is basically the placeholder for our search criteria that the user originally typed into the search form field. The view only needs to know where the form data is and not where it comes from. We simply assign the data to the form helper so it can prepopulate the fields for us (line 7).</p>
<p>The user can input here a substring of the name/description/instructions of a game and he can pick a category where the game must be in. Notice the different order options as well as the string "All Categories" for the empty option of the select tag. One other remarkable thing is that we have both isset($games) and !empty($games) calls there. This is to differentiate if the user has submitted the form already ( isset($games) ) and, if he did, the resultset is not empty which allows us to display that "Nothing found" message.</p>
<p>Here is the /views/games/list.ctp view just so you have the complete code:</p>
<div class="clear"></div>
<div class="code debuggable_sh_php" style="white-space: wrap;white-space: nowrap;"><span class="kw2">&lt;?php</span><br />
<span class="re0">$short</span> = <a href="http://www.php.net/isset"><span class="kw3">isset</span></a><span class="br0">&#40;</span><span class="re0">$short</span><span class="br0">&#41;</span> ? <span class="re0">$short</span> : <span class="kw2">false</span>;<br />
<span class="re0">$class</span> = <span class="re0">$short</span> ? <span class="st0">' short'</span> : <span class="st0">''</span>;<br />
<span class="kw2">?&gt;</span><br />
&lt;div class=&quot;games-list&quot;&gt;<br />
&nbsp; <span class="kw2">&lt;?php</span> <span class="kw1">foreach</span> <span class="br0">&#40;</span><span class="re0">$games</span> <span class="kw1">as</span> <span class="re0">$game</span><span class="br0">&#41;</span> : <span class="kw2">?&gt;</span><br />
&nbsp; &nbsp; &lt;div class=&quot;game<span class="kw2">&lt;?php</span> <a href="http://www.php.net/echo"><span class="kw3">echo</span></a> <span class="re0">$class</span> <span class="kw2">?&gt;</span>&quot;&gt;<br />
&nbsp; &nbsp; &nbsp; &lt;div class=&quot;game-image&quot;&gt;<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw2">&lt;?php</span> <a href="http://www.php.net/echo"><span class="kw3">echo</span></a> <span class="re0">$this</span>-&gt;<span class="me1">element</span><span class="br0">&#40;</span><span class="st0">'game_image'</span>, <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="st0">'game'</span> =&gt; <span class="re0">$game</span>, <span class="st0">'thumb'</span> =&gt; <span class="kw2">true</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="kw2">?&gt;</span><br />
&nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />
&nbsp; &nbsp; &nbsp; &lt;div class=&quot;game-descr&quot;&gt;<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw2">&lt;?php</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$name</span> = <span class="re0">$game</span><span class="br0">&#91;</span><span class="st0">'Game'</span><span class="br0">&#93;</span><span class="br0">&#91;</span><span class="st0">'name'</span><span class="br0">&#93;</span>;<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">&#40;</span><a href="http://www.php.net/isset"><span class="kw3">isset</span></a><span class="br0">&#40;</span><span class="re0">$hilite</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<span class="re0">$name</span> = <span class="re0">$text</span>-&gt;<span class="me1">highlight</span><span class="br0">&#40;</span><span class="re0">$game</span><span class="br0">&#91;</span><span class="st0">'Game'</span><span class="br0">&#93;</span><span class="br0">&#91;</span><span class="st0">'name'</span><span class="br0">&#93;</span>, <span class="re0">$hilite</span><span class="br0">&#41;</span>;<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <a href="http://www.php.net/echo"><span class="kw3">echo</span></a> <span class="re0">$html</span>-&gt;<span class="me1">link</span><span class="br0">&#40;</span><span class="re0">$name</span>, Game::<span class="me2">url</span><span class="br0">&#40;</span><span class="re0">$game</span><span class="br0">&#41;</span>, <span class="kw2">null</span>, <span class="kw2">false</span>, <span class="kw2">false</span><span class="br0">&#41;</span>;<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw2">?&gt;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw2">&lt;?php</span> <span class="kw1">if</span> <span class="br0">&#40;</span>!<span class="re0">$short</span><span class="br0">&#41;</span> : <span class="kw2">?&gt;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
<span class="kw2">&lt;?php</span> <a href="http://www.php.net/echo"><span class="kw3">echo</span></a> <span class="re0">$game</span><span class="br0">&#91;</span><span class="st0">'Game'</span><span class="br0">&#93;</span><span class="br0">&#91;</span><span class="st0">'short_desc'</span><span class="br0">&#93;</span> <span class="kw2">?&gt;</span><br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class=&quot;plays&quot;&gt;&lt;span&gt;Plays:&lt;/span&gt; <span class="kw2">&lt;?php</span> <a href="http://www.php.net/echo"><span class="kw3">echo</span></a> <span class="re0">$game</span><span class="br0">&#91;</span><span class="st0">'Game'</span><span class="br0">&#93;</span><span class="br0">&#91;</span><span class="st0">'game_playing_count'</span><span class="br0">&#93;</span><span class="kw2">?&gt;</span>&lt;/div&gt;<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw2">&lt;?php</span> <span class="kw1">endif</span>; <span class="kw2">?&gt;</span><br />
&nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />
&nbsp; &nbsp; &lt;/div&gt;<br />
&nbsp; <span class="kw2">&lt;?php</span> <span class="kw1">endforeach</span>; <span class="kw2">?&gt;</span><br />
&lt;/div&gt;<br />
?&gt;</div>
<p>Straightforward... Let's move on to the paging element:</p>
<div class="clear"></div>
<div class="code debuggable_sh_php" style="white-space: wrap;white-space: nowrap;"><span class="kw2">&lt;?php</span><br />
<span class="kw1">if</span> <span class="br0">&#40;</span>!<a href="http://www.php.net/isset"><span class="kw3">isset</span></a><span class="br0">&#40;</span><span class="re0">$model</span><span class="br0">&#41;</span> || <span class="re0">$paginator</span>-&gt;<span class="me1">params</span><span class="br0">&#91;</span><span class="st0">'paging'</span><span class="br0">&#93;</span><span class="br0">&#91;</span><span class="re0">$model</span><span class="br0">&#93;</span><span class="br0">&#91;</span><span class="st0">'pageCount'</span><span class="br0">&#93;</span> &gt; <span class="nu0">1</span><span class="br0">&#41;</span> : <span class="kw2">?&gt;</span><br />
&lt;div class=&quot;paging&quot;&gt;<br />
&nbsp; <span class="kw2">&lt;?php</span> <a href="http://www.php.net/echo"><span class="kw3">echo</span></a> <span class="re0">$paginator</span>-&gt;<span class="me1">prev</span><span class="br0">&#40;</span><span class="st0">'&amp;laquo; Previous'</span>, <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="st0">'escape'</span> =&gt; <span class="kw2">false</span>, <span class="st0">'class'</span> =&gt; <span class="st0">'prev'</span><span class="br0">&#41;</span>, <span class="kw2">null</span>, <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="st0">'class'</span>=&gt;<span class="st0">'disabled'</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;?&gt;<br />
&nbsp;&nbsp;<span class="kw2">&lt;?php</span> <a href="http://www.php.net/echo"><span class="kw3">echo</span></a> <span class="re0">$paginator</span>-&gt;<span class="me1">numbers</span><span class="br0">&#40;</span><span class="br0">&#41;</span>;?&gt;<br />
&nbsp; <span class="kw2">&lt;?php</span> <a href="http://www.php.net/echo"><span class="kw3">echo</span></a> <span class="re0">$paginator</span>-&gt;<span class="me1">next</span><span class="br0">&#40;</span><span class="st0">'Next &amp;raquo;'</span>, <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="st0">'escape'</span> =&gt; <span class="kw2">false</span>, <span class="st0">'class'</span> =&gt; <span class="st0">'next'</span><span class="br0">&#41;</span>, <span class="kw2">null</span>, <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="st0">'class'</span>=&gt;<span class="st0">'disabled'</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;?&gt;<br />
&lt;/div&gt;<br />
<span class="kw2">&lt;?php</span> <span class="kw1">endif</span>; <span class="kw2">?&gt;</span></div>
<p>Notice the different checks at the start in order to figure out if we need to display a div at all.. This is called in the advanced.ctp view and the model GameCategoriesGame is supplied, which is a convenience HABTM model which belongsTo both Game and GameCategory.</p>
<h3>The controller action</h3>
<p>The controller action might appear a little big at first glance. However, every line has its purpose. This is in a SearchesController. You could have your own search() method though in about any controller.</p>
<div class="clear"></div>
<div class="code debuggable_sh_php" style="white-space: wrap;white-space: nowrap;">
<span class="kw2">function</span> advanced<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span><br />
&nbsp; &nbsp; <span class="re0">$searchCategories</span> = <span class="re0">$this</span>-&gt;<span class="me1">Game</span>-&gt;<span class="me1">GameCategory</span>-&gt;<span class="me1">find</span><span class="br0">&#40;</span><span class="st0">'list'</span>, <a href="http://www.php.net/compact"><span class="kw3">compact</span></a><span class="br0">&#40;</span><span class="st0">'conditions'</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;<br />
&nbsp; &nbsp; <span class="re0">$this</span>-&gt;<span class="me1">set</span><span class="br0">&#40;</span><a href="http://www.php.net/compact"><span class="kw3">compact</span></a><span class="br0">&#40;</span><span class="st0">'searchCategories'</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;<br />
<br />
&nbsp; &nbsp; <span class="re0">$page</span> = <span class="nu0">1</span>;<br />
&nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">&#40;</span><a href="http://www.php.net/isset"><span class="kw3">isset</span></a><span class="br0">&#40;</span><span class="re0">$this</span>-&gt;<span class="me1">params</span><span class="br0">&#91;</span><span class="st0">'named'</span><span class="br0">&#93;</span><span class="br0">&#91;</span><span class="st0">'page'</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span><br />
&nbsp; &nbsp; &nbsp; <span class="re0">$page</span> = <span class="re0">$this</span>-&gt;<span class="me1">params</span><span class="br0">&#91;</span><span class="st0">'named'</span><span class="br0">&#93;</span><span class="br0">&#91;</span><span class="st0">'page'</span><span class="br0">&#93;</span>;<br />
&nbsp; &nbsp; <span class="br0">&#125;</span><br />
<br />
&nbsp; &nbsp; <span class="re0">$formData</span> = <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span>;<br />
&nbsp; &nbsp; <span class="re0">$sessionKey</span> = <span class="st0">'advanced_search_query'</span>;<br />
&nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">&#40;</span><a href="http://www.php.net/isset"><span class="kw3">isset</span></a><span class="br0">&#40;</span><span class="re0">$this</span>-&gt;<span class="me1">data</span><span class="br0">&#91;</span><span class="st0">'Search'</span><span class="br0">&#93;</span><span class="br0">&#91;</span><span class="st0">'keywords'</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span><br />
&nbsp; &nbsp; &nbsp; <span class="re0">$formData</span> = <span class="re0">$this</span>-&gt;<span class="me1">data</span>;<br />
&nbsp; &nbsp; &nbsp; <span class="re0">$this</span>-&gt;<span class="me1">Session</span>-&gt;<span class="me1">write</span><span class="br0">&#40;</span><span class="re0">$sessionKey</span>, <span class="re0">$formData</span><span class="br0">&#41;</span>;<br />
&nbsp; &nbsp; <span class="br0">&#125;</span> <span class="kw1">elseif</span> <span class="br0">&#40;</span><span class="re0">$this</span>-&gt;<span class="me1">Session</span>-&gt;<span class="me1">check</span><span class="br0">&#40;</span><span class="re0">$sessionKey</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span><br />
&nbsp; &nbsp; &nbsp; <span class="re0">$formData</span> = <span class="re0">$this</span>-&gt;<span class="me1">Session</span>-&gt;<span class="me1">read</span><span class="br0">&#40;</span><span class="re0">$sessionKey</span><span class="br0">&#41;</span>;<br />
&nbsp; &nbsp; <span class="br0">&#125;</span> <span class="kw1">else</span> <span class="br0">&#123;</span><br />
&nbsp; &nbsp; &nbsp; <a href="http://www.php.net/assert"><span class="kw3">Assert</span></a>::<span class="kw2">true</span><span class="br0">&#40;</span><span class="kw2">false</span>, <span class="st0">'404'</span><span class="br0">&#41;</span>;<br />
&nbsp; &nbsp; <span class="br0">&#125;</span><br />
&nbsp; &nbsp; <span class="re0">$this</span>-&gt;<span class="me1">set</span><span class="br0">&#40;</span><a href="http://www.php.net/compact"><span class="kw3">compact</span></a><span class="br0">&#40;</span><span class="st0">'formData'</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;<br />
<br />
<br />
&nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">&#40;</span>!<a href="http://www.php.net/empty"><span class="kw3">empty</span></a><span class="br0">&#40;</span><span class="re0">$formData</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span><br />
&nbsp; &nbsp; &nbsp; <span class="re0">$query</span> = <span class="re0">$formData</span><span class="br0">&#91;</span><span class="st0">'Search'</span><span class="br0">&#93;</span><span class="br0">&#91;</span><span class="st0">'keywords'</span><span class="br0">&#93;</span>;<br />
&nbsp; &nbsp; &nbsp; <span class="re0">$useQuery</span> = <a href="http://www.php.net/trim"><span class="kw3">trim</span></a><span class="br0">&#40;</span>low<span class="br0">&#40;</span><span class="re0">$query</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;<br />
<br />
&nbsp; &nbsp; &nbsp; <span class="re0">$conditions</span> = <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span>;<br />
&nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">&#40;</span>!<a href="http://www.php.net/empty"><span class="kw3">empty</span></a><span class="br0">&#40;</span><span class="re0">$formData</span><span class="br0">&#91;</span><span class="st0">'Search'</span><span class="br0">&#93;</span><span class="br0">&#91;</span><span class="st0">'game_category_id'</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$conditions</span><span class="br0">&#91;</span><span class="st0">'GameCategoriesGame.game_category_id'</span><span class="br0">&#93;</span> = <span class="re0">$formData</span><span class="br0">&#91;</span><span class="st0">'Search'</span><span class="br0">&#93;</span><span class="br0">&#91;</span><span class="st0">'game_category_id'</span><span class="br0">&#93;</span>;<br />
&nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span><br />
&nbsp; &nbsp; &nbsp; <span class="re0">$conditions</span> = am<span class="br0">&#40;</span><span class="re0">$conditions</span>, <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="st0">'Game.published'</span> =&gt; <span class="st0">'1'</span>,<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="st0">'or'</span> =&gt; <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="st0">'LOWER(Game.name) LIKE'</span> =&gt; <span class="st0">&quot;%{$useQuery}%&quot;</span>,<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="st0">'LOWER(Game.short_desc) LIKE'</span> =&gt; <span class="st0">&quot;%{$useQuery}%&quot;</span>,<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="st0">'LOWER(Game.long_desc) LIKE'</span> =&gt; <span class="st0">&quot;%{$useQuery}%&quot;</span>,<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="st0">'LOWER(Game.instructions) LIKE'</span> =&gt; <span class="st0">&quot;%{$useQuery}%&quot;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#41;</span><br />
&nbsp; &nbsp; &nbsp; <span class="br0">&#41;</span><span class="br0">&#41;</span>;<br />
<br />
&nbsp; &nbsp; &nbsp; <span class="re0">$this</span>-&gt;<span class="me1">GameCategoriesGame</span>-&gt;<span class="me1">forcePaginateCount</span> = <span class="re0">$this</span>-&gt;<span class="me1">GameCategoriesGame</span>-&gt;<span class="me1">paginatorCount</span><span class="br0">&#40;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="st0">'game_categories_games'</span>, <span class="re0">$conditions</span>, <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="st0">'Game'</span><span class="br0">&#41;</span><br />
&nbsp; &nbsp; &nbsp; <span class="br0">&#41;</span>;<br />
&nbsp; &nbsp; &nbsp; <span class="re0">$contain</span> = <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="st0">'GameCategory'</span>, <span class="st0">'Game.Tag'</span><span class="br0">&#41;</span>;<br />
&nbsp; &nbsp; &nbsp; <span class="re0">$order</span> = <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="st0">'Game.name'</span> =&gt; <span class="st0">'asc'</span><span class="br0">&#41;</span>;<br />
<br />
&nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">&#40;</span>!<a href="http://www.php.net/empty"><span class="kw3">empty</span></a><span class="br0">&#40;</span><span class="re0">$formData</span><span class="br0">&#91;</span><span class="st0">'Search'</span><span class="br0">&#93;</span><span class="br0">&#91;</span><span class="st0">'order_by'</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$order</span> = <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="re0">$formData</span><span class="br0">&#91;</span><span class="st0">'Search'</span><span class="br0">&#93;</span><span class="br0">&#91;</span><span class="st0">'order_by'</span><span class="br0">&#93;</span> =&gt; <span class="re0">$formData</span><span class="br0">&#91;</span><span class="st0">'Search'</span><span class="br0">&#93;</span><span class="br0">&#91;</span><span class="st0">'order_dir'</span><span class="br0">&#93;</span><span class="br0">&#41;</span>;<br />
&nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span><br />
<br />
&nbsp; &nbsp; &nbsp; <span class="re0">$this</span>-&gt;<span class="me1">paginate</span><span class="br0">&#91;</span><span class="st0">'GameCategoriesGame'</span><span class="br0">&#93;</span> = <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="st0">'conditions'</span> =&gt; <span class="re0">$this</span>-&gt;<span class="me1">GameCategoriesGame</span>-&gt;<span class="me1">paginatorConditions</span><span class="br0">&#40;</span><span class="st0">'game_categories_games'</span>, <span class="re0">$conditions</span><span class="br0">&#41;</span>,<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="st0">'contain'</span> =&gt; <span class="re0">$contain</span>,<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="st0">'order'</span> =&gt; <span class="re0">$order</span>,<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="st0">'limit'</span> =&gt; <span class="nu0">12</span><br />
&nbsp; &nbsp; &nbsp; <span class="br0">&#41;</span>;<br />
&nbsp; &nbsp; &nbsp; <span class="re0">$games</span> = <span class="re0">$this</span>-&gt;<span class="me1">paginate</span><span class="br0">&#40;</span><span class="st0">'GameCategoriesGame'</span><span class="br0">&#41;</span>;<br />
&nbsp; &nbsp; &nbsp; <span class="re0">$this</span>-&gt;<span class="me1">set</span><span class="br0">&#40;</span><a href="http://www.php.net/compact"><span class="kw3">compact</span></a><span class="br0">&#40;</span><span class="st0">'games'</span>, <span class="st0">'query'</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;<br />
&nbsp; &nbsp; <span class="br0">&#125;</span><br />
&nbsp; <span class="br0">&#125;</span></div>
<p>So we are first loading all our game categories to populate the select tag. Then we check if there is a named parameter "page" given. If so, the user clicked on the Previous/Next/Numbered links. If it is not present, we might as well start at page 1. ; ]</p>
<p>Now comes the tricky part. We check if the form was submitted via empty($this->data). If it is submitted, we store all the form data in the session. If the form is not submitted we try to recover the form data from the session. If both the form is not submitted and there is no data in the session, but it still a Get request, something bad happened and we fire the user by <a href="http://debuggable.com/posts/assert-the-yummyness-of-your-cake:480f4dd6-7fe0-4113-9776-458acbdd56cb">asserting the yummyness of his cake</a>.</p>
<p>The rest should be familiar - some processing of the $formData array to extract the proper conditions and order stuff. The most interesting stuff now is that call to $this->GameCategoriesGame->paginatorCount('game_categories_games', $conditions, array('Game'));. This enables us to paginate over the HABTM relation (Game HABTM GameCategory). Here is the code from the GameCategoriesGame model:</p>
<div class="clear"></div>
<div class="code debuggable_sh_php" style="white-space: wrap;white-space: nowrap;"><span class="kw2">&lt;?php</span><br />
<span class="kw2">class</span> GameCategoriesGame <span class="kw2">extends</span> AppModel <span class="br0">&#123;</span><br />
&nbsp; <span class="kw2">var</span> <span class="re0">$name</span> = <span class="st0">'GameCategoriesGame'</span>;<br />
&nbsp; <span class="kw2">var</span> <span class="re0">$belongsTo</span> = <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="st0">'GameCategory'</span>, <span class="st0">'Game'</span><span class="br0">&#41;</span>;<br />
<br />
<span class="coMULTI">/**<br />
&nbsp;* Return count for given pagination<br />
&nbsp;*<br />
&nbsp;* @param string $paginator Pagination name<br />
&nbsp;* @param array $conditions Conditions to use<br />
&nbsp;* @return mixed Count, or false<br />
&nbsp;* @access public<br />
&nbsp;*/</span><br />
&nbsp; <span class="kw2">function</span> paginatorCount<span class="br0">&#40;</span><span class="re0">$paginator</span>, <span class="re0">$conditions</span> = <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span>, <span class="re0">$contain</span> = <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span><br />
&nbsp; &nbsp; <span class="re0">$Db</span> = ConnectionManager::<span class="me2">getDataSource</span><span class="br0">&#40;</span><span class="re0">$this</span>-&gt;<span class="me1">useDbConfig</span><span class="br0">&#41;</span>;<br />
&nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">&#40;</span>!<a href="http://www.php.net/empty"><span class="kw3">empty</span></a><span class="br0">&#40;</span><span class="re0">$contain</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span><br />
&nbsp; &nbsp; &nbsp; <span class="re0">$related</span> = ClassRegistry::<span class="me2">init</span><span class="br0">&#40;</span><span class="re0">$contain</span><span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span><span class="br0">&#41;</span>;<br />
&nbsp; &nbsp; <span class="br0">&#125;</span><br />
<br />
&nbsp; &nbsp; <span class="re0">$sql</span> = <span class="st0">'SELECT<br />
&nbsp; &nbsp; &nbsp; COUNT(DISTINCT '</span> . <span class="re0">$this</span>-&gt;<span class="me1">alias</span> . <span class="st0">'.'</span> . <span class="re0">$this</span>-&gt;<span class="me1">belongsTo</span><span class="br0">&#91;</span><span class="st0">'Game'</span><span class="br0">&#93;</span><span class="br0">&#91;</span><span class="st0">'foreignKey'</span><span class="br0">&#93;</span> . <span class="st0">') count<br />
&nbsp; &nbsp; FROM '</span> . <span class="re0">$Db</span>-&gt;<span class="me1">fullTableName</span><span class="br0">&#40;</span><span class="re0">$this</span>-&gt;<span class="me1">table</span><span class="br0">&#41;</span> . <span class="st0">' '</span> . <span class="re0">$Db</span>-&gt;<span class="me1">name</span><span class="br0">&#40;</span><span class="re0">$this</span>-&gt;<span class="me1">alias</span><span class="br0">&#41;</span> . <span class="st0">' '</span>;<br />
&nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">&#40;</span>!<a href="http://www.php.net/empty"><span class="kw3">empty</span></a><span class="br0">&#40;</span><span class="re0">$contain</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span><br />
&nbsp; &nbsp; &nbsp; <span class="re0">$sql</span> .= <span class="st0">' INNER JOIN '</span> . <span class="re0">$Db</span>-&gt;<span class="me1">fullTableName</span><span class="br0">&#40;</span><span class="re0">$related</span>-&gt;<span class="me1">table</span><span class="br0">&#41;</span> . <span class="st0">' '</span> . <span class="re0">$Db</span>-&gt;<span class="me1">name</span><span class="br0">&#40;</span><span class="re0">$related</span>-&gt;<span class="me1">alias</span><span class="br0">&#41;</span> . <span class="st0">' '</span>;<br />
&nbsp; &nbsp; <span class="br0">&#125;</span><br />
&nbsp; &nbsp; <span class="re0">$sql</span> .= <span class="re0">$Db</span>-&gt;<span class="me1">conditions</span><span class="br0">&#40;</span><span class="re0">$this</span>-&gt;<span class="me1">paginatorConditions</span><span class="br0">&#40;</span><span class="re0">$paginator</span>, <span class="re0">$conditions</span>, <span class="st0">'count'</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;<br />
<br />
&nbsp; &nbsp; <span class="re0">$count</span> = <span class="re0">$this</span>-&gt;<span class="me1">query</span><span class="br0">&#40;</span><span class="re0">$sql</span><span class="br0">&#41;</span>;<br />
<br />
&nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">&#40;</span>!<a href="http://www.php.net/empty"><span class="kw3">empty</span></a><span class="br0">&#40;</span><span class="re0">$count</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span><br />
&nbsp; &nbsp; &nbsp; <span class="re0">$count</span> = <span class="re0">$count</span><span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span><span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span><span class="br0">&#91;</span><span class="st0">'count'</span><span class="br0">&#93;</span>;<br />
&nbsp; &nbsp; <span class="br0">&#125;</span><br />
&nbsp; &nbsp; <span class="kw1">return</span> <span class="re0">$count</span>;<br />
&nbsp; <span class="br0">&#125;</span><br />
<span class="coMULTI">/**<br />
&nbsp;* Build conditions for given pagination<br />
&nbsp;*<br />
&nbsp;* @param string $paginator Pagination name<br />
&nbsp;* @param array $extraConditions Extra conditions to use<br />
&nbsp;* @param string $method 'count', or 'find'<br />
&nbsp;* @return array Conditions<br />
&nbsp;* @access public<br />
&nbsp;*/</span><br />
&nbsp; <span class="kw2">function</span> paginatorConditions<span class="br0">&#40;</span><span class="re0">$paginator</span>, <span class="re0">$extraConditions</span> = <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span>, <span class="re0">$method</span> = <span class="kw2">null</span><span class="br0">&#41;</span> <span class="br0">&#123;</span><br />
&nbsp; &nbsp; <span class="re0">$Db</span> = ConnectionManager::<span class="me2">getDataSource</span><span class="br0">&#40;</span><span class="re0">$this</span>-&gt;<span class="me1">useDbConfig</span><span class="br0">&#41;</span>;<br />
&nbsp; &nbsp; <span class="re0">$conditions</span> = <span class="kw2">null</span>;<br />
&nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">&#40;</span><a href="http://www.php.net/empty"><span class="kw3">empty</span></a><span class="br0">&#40;</span><span class="re0">$extraConditions</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span><br />
&nbsp; &nbsp; &nbsp; <span class="re0">$extraConditions</span> = <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="st0">'1=1'</span><span class="br0">&#41;</span>;<br />
&nbsp; &nbsp; <span class="br0">&#125;</span><br />
&nbsp; &nbsp; <span class="kw1">switch</span> <span class="br0">&#40;</span><a href="http://www.php.net/strtolower"><span class="kw3">strtolower</span></a><span class="br0">&#40;</span><span class="re0">$paginator</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span><br />
&nbsp; &nbsp; &nbsp; <span class="kw1">case</span> <span class="st0">'game_categories_games'</span>:<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">&#40;</span><span class="re0">$method</span> != <span class="st0">'count'</span><span class="br0">&#41;</span> <span class="br0">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$conditions</span> = <a href="http://www.php.net/array_merge"><span class="kw3">array_merge</span></a><span class="br0">&#40;</span><span class="re0">$extraConditions</span>, <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="st0">'1=1 GROUP BY '</span> . <span class="re0">$this</span>-&gt;<span class="me1">alias</span> . <span class="st0">'.'</span> . <span class="re0">$this</span>-&gt;<span class="me1">belongsTo</span><span class="br0">&#91;</span><span class="st0">'Game'</span><span class="br0">&#93;</span><span class="br0">&#91;</span><span class="st0">'foreignKey'</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span> <span class="kw1">else</span> <span class="br0">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="re0">$conditions</span> = <span class="re0">$extraConditions</span>;<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">break</span>;<br />
&nbsp; &nbsp; <span class="br0">&#125;</span><br />
&nbsp; &nbsp; <span class="kw1">return</span> <span class="re0">$conditions</span>;<br />
&nbsp; <span class="br0">&#125;</span><br />
<span class="coMULTI">/**<br />
&nbsp;* Executed by the paginator to get the count. Overriden to allow<br />
&nbsp;* forcing a count (through var $forcePaginateCount)<br />
&nbsp;*<br />
&nbsp;* @param array $conditions Conditions to use<br />
&nbsp;* @param int $recursive Recursivity level<br />
&nbsp;* @return int Count<br />
&nbsp;* @access public<br />
&nbsp;*/</span><br />
&nbsp; <span class="kw2">function</span> paginateCount<span class="br0">&#40;</span><span class="re0">$conditions</span>, <span class="re0">$recursive</span><span class="br0">&#41;</span> <span class="br0">&#123;</span><br />
&nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">&#40;</span><a href="http://www.php.net/isset"><span class="kw3">isset</span></a><span class="br0">&#40;</span><span class="re0">$this</span>-&gt;<span class="me1">forcePaginateCount</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span><br />
&nbsp; &nbsp; &nbsp; <span class="re0">$count</span> = <span class="re0">$this</span>-&gt;<span class="me1">forcePaginateCount</span>;<br />
&nbsp; &nbsp; &nbsp; <a href="http://www.php.net/unset"><span class="kw3">unset</span></a><span class="br0">&#40;</span><span class="re0">$this</span>-&gt;<span class="me1">forcePaginateCount</span><span class="br0">&#41;</span>;<br />
&nbsp; &nbsp; <span class="br0">&#125;</span> <span class="kw1">else</span> <span class="br0">&#123;</span><br />
&nbsp; &nbsp; &nbsp; <span class="re0">$count</span> = <span class="re0">$this</span>-&gt;<span class="me1">find</span><span class="br0">&#40;</span><span class="st0">'count'</span>, <a href="http://www.php.net/compact"><span class="kw3">compact</span></a><span class="br0">&#40;</span><span class="st0">'conditions'</span>, <span class="st0">'recursive'</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;<br />
&nbsp; &nbsp; <span class="br0">&#125;</span><br />
&nbsp; &nbsp; <span class="kw1">return</span> <span class="re0">$count</span>;<br />
&nbsp; <span class="br0">&#125;</span><br />
<span class="br0">&#125;</span><br />
<span class="kw2">?&gt;</span></div>
<p>To make a long story short: You see we build up the count query on our on and then force Cake to use our calculated count via our own forcePaginateCount property of the model. The Group BY is already in there, we can supply extra conditions and have different queries for different types (see the switch statement in paginatorConditions).<br />
Alas, we have to build the sql on our own for the JOINs, which can become a headache for more complex problems. Anyway, this code gives us enough flexibility to build the right pagination for every problem. :) If you can think of a problem this code cannot be used for, please let me know and we discuss.</p>
<p>The paginateCount() method could go into your AppModel, I just put it here to have the code in one place to keep it simpler.</p>
<h2>Conclusion</h2>
<p>The method presented has some advantages and disadvantages, as always. The advantages would definitely include that we don't have to extend the controller's paginate() method in our app controller. This is what many people do and what I did in the past as well. However, as always, it's not good manners to hack the core.<br />
Another advantage is the flexibility of the code - with just one line, we can calculate pagination counts for almost every occasion, and even if we paginate over two or three HABTM relations (I can show you later).</p>
<p>Disadvantages include some bloat in your models and the need to write sql again (*sigh*), which can become very complex if you have to supply all the JOINS yourself for more complex problems. Apart from that the code does not yet have full integration of the containable behavior. However, that I can add later.</p>
<p>I hope you liked the article and can put it to some use. Credits go to mariano for the original idea for this. If you guys are interested in seeing how I coupled the "Save search" feature from <a href="http://flashfun247.com/searches/advanced">here</a> with all of this, feel free to ask and we can have some nice discussion.</p>
<p><img style="display: none;" src="http://debuggable.com/posts/tick/48fc5f77-38d0-41e0-b711-77c64834cda3"></p>
	</div>
	<div class="clear">&nbsp;</div>
	<div class="social">
	<p class="subscribe">Did you like this blog post? If so, please consider <a href="http://feeds.feedburner.com/debuggable">subscribing to the Blog RSS feed</a>.</p>

	<ul>
	<li class="sociablefirst">
				<a class="linkedin" title="LinkedIn" href="javascript:window.location='http://www.linkedin.com/shareArticle?mini=true&amp;url=http%3A%2F%2Fdebuggable.com%2Fposts%2Fhow-to-paginate-a-search-using-the-cakephp-framework%3A48fc5f77-38d0-41e0-b711-77c64834cda3 &amp;title=How+to+paginate+a+CakePHP+search+over+a+HABTM+relation+without+hacking+the+core';" rel="nofollow">
			<img class="sociable-hovers" alt="Linked In" title="Linked In" src="/img/social_icons/linkedin.png"/>
		</a>
	</li>
	<li>
		<a class="sphinn" title="Sphinn" href="javascript:window.location='http://sphinn.com/index.php?c=post&amp;m=submit&amp;link=http%3A%2F%2Fdebuggable.com%2Fposts%2Fhow-to-paginate-a-search-using-the-cakephp-framework%3A48fc5f77-38d0-41e0-b711-77c64834cda3';" rel="nofollow">
		<img class="sociable-hovers" alt="Sphinn" title="Sphinn" src="/img/social_icons/sphinn.png"/>
		</a>
	</li>
	<li>
		<a class="digg" title="Digg" href="javascript:window.location='http://digg.com/submit?url=http%3A%2F%2Fdebuggable.com%2Fposts%2Fhow-to-paginate-a-search-using-the-cakephp-framework%3A48fc5f77-38d0-41e0-b711-77c64834cda3&amp;title=How+to+paginate+a+CakePHP+search+over+a+HABTM+relation+without+hacking+the+core&amp;bodytext=+..&amp;media=News&amp;topic=Programming';" rel="nofollow">
		<img class="sociable-hovers" alt="Digg" title="Digg" src="/img/social_icons/digg.png"/>
		</a>
	</li>
	<li>
	<a class="del.icio.us" title="del.icio.us" href="javascript:window.location='http://delicious.com/post?url=http%3A%2F%2Fdebuggable.com%2Fposts%2Fhow-to-paginate-a-search-using-the-cakephp-framework%3A48fc5f77-38d0-41e0-b711-77c64834cda3&amp;title=How+to+paginate+a+CakePHP+search+over+a+HABTM+relation+without+hacking+the+core';" rel="nofollow">
		<img class="sociable-hovers" alt="Delicious" title="Delicious" src="/img/social_icons/delicious.png"/>
	</a>
	</li>
	<li class="sociablelast">
		<a class="stumbleupon" title="StumbleUpon" href="javascript:window.location='http://www.stumbleupon.com/submit?url=http%253A%252F%252Fyoast.com%252F40-wordpress-optimisation-tips%252F&amp;title=40%2520WordPress%2520Optimisation%2520tips';" rel="nofollow">
		<img class="sociable-hovers" alt="StumbleUpon" title="StumbleUpon" src="/img/social_icons/stumbleupon.png"/>
		</a>
	</li>
	</ul>
</div>

	
	<div class="post-footer">
		<img src="/css/img/comments.png" alt="Comments"> <a href="/posts/how-to-paginate-a-search-using-the-cakephp-framework:48fc5f77-38d0-41e0-b711-77c64834cda3">29 Comments</a> &nbsp; | &nbsp; 
		<img src="/css/img/add_comment.png" alt="Add Comment"> <a href="/posts/how-to-paginate-a-search-using-the-cakephp-framework:48fc5f77-38d0-41e0-b711-77c64834cda3#CommentAddForm">Add Comment</a>	</div>
	</div>
<div class="post">
	<h2><a href="/posts/first-cakebar-meetup-in-munich:4922bdb7-f1ec-438c-ae02-1f7c4834cda3">First CakeBar meetup in Munich</a></h2>	<div class="posted-on">
		<p>Posted on 18/11/08 by 
		<a href="/felix">Felix Geisendörfer</a>				</p>
		<div class="thumb">
			<img alt="" src="/img/felix_thumb.jpg"/>		</div>
	</div>
	<div class="body">
				<p>Hey folks,</p>
<p>a bunch of bakers are starting to organize a regular CakePHP meetup in Munich. If you are interested check out <a href="http://www.cakebar.de/?p=9">their website</a>. The first meeting is on Thursday 7:30pm!</p>
<p>Out of curiosity, anybody interested in having a meetup here in Berlin? <a href="mailto:felix@debuggable.com">Let me know</a> and Tim and I will organize something after <a href="http://cakefest.org/">CakeFest</a>.</p>
<p>-- Felix Geisendörfer aka the_undefined<br />
<img style="display: none;" src="http://debuggable.com/posts/tick/4922bdb7-f1ec-438c-ae02-1f7c4834cda3"></p>
	</div>
	<div class="clear">&nbsp;</div>
	<div class="social">
	<p class="subscribe">Did you like this blog post? If so, please consider <a href="http://feeds.feedburner.com/debuggable">subscribing to the Blog RSS feed</a>.</p>

	<ul>
	<li class="sociablefirst">
				<a class="linkedin" title="LinkedIn" href="javascript:window.location='http://www.linkedin.com/shareArticle?mini=true&amp;url=http%3A%2F%2Fdebuggable.com%2Fposts%2Ffirst-cakebar-meetup-in-munich%3A4922bdb7-f1ec-438c-ae02-1f7c4834cda3 &amp;title=First+CakeBar+meetup+in+Munich';" rel="nofollow">
			<img class="sociable-hovers" alt="Linked In" title="Linked In" src="/img/social_icons/linkedin.png"/>
		</a>
	</li>
	<li>
		<a class="sphinn" title="Sphinn" href="javascript:window.location='http://sphinn.com/index.php?c=post&amp;m=submit&amp;link=http%3A%2F%2Fdebuggable.com%2Fposts%2Ffirst-cakebar-meetup-in-munich%3A4922bdb7-f1ec-438c-ae02-1f7c4834cda3';" rel="nofollow">
		<img class="sociable-hovers" alt="Sphinn" title="Sphinn" src="/img/social_icons/sphinn.png"/>
		</a>
	</li>
	<li>
		<a class="digg" title="Digg" href="javascript:window.location='http://digg.com/submit?url=http%3A%2F%2Fdebuggable.com%2Fposts%2Ffirst-cakebar-meetup-in-munich%3A4922bdb7-f1ec-438c-ae02-1f7c4834cda3&amp;title=First+CakeBar+meetup+in+Munich&amp;bodytext=+..&amp;media=News&amp;topic=Programming';" rel="nofollow">
		<img class="sociable-hovers" alt="Digg" title="Digg" src="/img/social_icons/digg.png"/>
		</a>
	</li>
	<li>
	<a class="del.icio.us" title="del.icio.us" href="javascript:window.location='http://delicious.com/post?url=http%3A%2F%2Fdebuggable.com%2Fposts%2Ffirst-cakebar-meetup-in-munich%3A4922bdb7-f1ec-438c-ae02-1f7c4834cda3&amp;title=First+CakeBar+meetup+in+Munich';" rel="nofollow">
		<img class="sociable-hovers" alt="Delicious" title="Delicious" src="/img/social_icons/delicious.png"/>
	</a>
	</li>
	<li class="sociablelast">
		<a class="stumbleupon" title="StumbleUpon" href="javascript:window.location='http://www.stumbleupon.com/submit?url=http%253A%252F%252Fyoast.com%252F40-wordpress-optimisation-tips%252F&amp;title=40%2520WordPress%2520Optimisation%2520tips';" rel="nofollow">
		<img class="sociable-hovers" alt="StumbleUpon" title="StumbleUpon" src="/img/social_icons/stumbleupon.png"/>
		</a>
	</li>
	</ul>
</div>

	
	<div class="post-footer">
		<img src="/css/img/comments.png" alt="Comments"> <a href="/posts/first-cakebar-meetup-in-munich:4922bdb7-f1ec-438c-ae02-1f7c4834cda3">15 Comments</a> &nbsp; | &nbsp; 
		<img src="/css/img/add_comment.png" alt="Add Comment"> <a href="/posts/first-cakebar-meetup-in-munich:4922bdb7-f1ec-438c-ae02-1f7c4834cda3#CommentAddForm">Add Comment</a>	</div>
	</div>
<div class="post">
	<h2><a href="/posts/buch-tip-webentwicklung-mit-cakephp:4912dccb-f594-4fa1-af20-6c564834cda3">Buchtipp: Webentwicklung mit CakePHP</a></h2>	<div class="posted-on">
		<p>Posted on 6/11/08 by 
		<a href="/felix">Felix Geisendörfer</a>				</p>
		<div class="thumb">
			<img alt="" src="/img/felix_thumb.jpg"/>		</div>
	</div>
	<div class="body">
				<p>Hey folks,</p>
<p>this is going to be my first blog post in German ever, which is borderline madness considering it is my mother language. Anyway, the book I'm talking about is written in German so it makes little to no sense to review it in English.</p>
<p>Das Buch <a href="http://www.amazon.de/Webentwicklung-mit-CakePHP-Dirk-Ammelburger/dp/3897218631/ref=sr_1_1?ie=UTF8&s=books&qid=1225972923&sr=8-1">Webentwicklung mit CakePHP</a> ist ohne Übertreibung *die beste* Veröffentlichung, die es zur Zeit zum Thema CakePHP zu erwerben gibt. Ich hatte die Gelegenheit, in einige CakePHP Bücher (größtenteils Englisch) hineinzuschnuppern und es gibt derzeit wirklich nichts Vergleichbares auf dem Markt.</p>
<p>Doch zunächst einmal, an wen richtet sich das Buch? In Kapitel 2 gibt es eine Hilfestellung zur Installation eines lokalen Webservers. Kompletten PHP / LAMP Neulingen würde ich dennoch vom Kauf abraten. Ohne solide Grundkenntnisse in PHP und prinzipiellem OOP Verständnis wird man schnell untergehen. Wenn man diese Hürde allerdings genommen hat ist das Buch eine wahre Goldgrube.  Eigentlich traurig, aber wahr: Auch Tim und ich als alte Cakehasen haben eine Menge Dinge über CakePHP gelernt die uns bis dato unbekannt waren.</p>
<p>Der Hauptunterschied des Buches gegenüber ähnlichen Büchern am Markt ist jedoch ein ganz anderer. Die Kommunikation der Philosophie. Kapitel 1 beschäftigt sich ausschließlich damit, zu erklären, was ein Framework überhaupt ist, warum man es verwenden sollte, was MVC ist etc. Klar, jedes Buch macht hier einen gewissen Versuch, die Grundidee zu vermitteln, aber Dirk & Robert gelingt es perfekt, die Motivation der Core-Entwickler zu verstehen und zu vermitteln. Dies ist unglaublich nützlich wenn es später darum geht, bestimmte Entscheidungen des Frameworks im Bezug auf Conventions, DRY (Don't repeat yourself), MVC, etc. zu verstehen.</p>
<p>Auch der restliche Aufbau des Buches ist gut durchdacht. Ein Blick in das <a href="http://webentwicklung-mit-cakephp.de/inhalt">Inhaltsverzeichnis</a> verrät: Schon in Kapitel 3 wird mit der ersten Datenbankanbindung und der Scaffolding Funktion zur Sache gegangen. Anschließend folgen ganz klassisch Erklärungen zum Controller, Model, View, Helpers, Session handling, Components, etc.. Soweit so gut, das findet man auch noch anderswo erklärt.</p>
<p>Wo sich das Buch wirklich lohnt sind die schwierigeren Themen. Die Nummer 1 ist ohne Frage ACL. Es geht ja das böse Gerücht um, das lediglich Nate Abele (Entwickler der ACL Funktionalität in CakePHP) in der Lage ist, mit cake's ACL System zu arbeiten. Pustekuchen. Oder in den Worten der Autoren: "Wenn der Kuchen spricht, haben die Krümel zu schweigen". Das ACL Kapitel des Buches ist aus meiner Sicht für sich allein genommen den Kauf Wert. In ~20 Seiten wird einem ein exzellentes Verständnis der Architektur inkl. MPTT gegeben und an praktischen Beispielen erklärt, wie der Hase - pardon - Kuchen läuft.</p>
<p>Aber auch die anderen Kapitel müssen sich nicht verstecken. Das Buch erklärt auch i18n, AJAX, Unit testing, Plugins und Fehler Behandlung. Immer perfekt gelungen ist der Kompromiss der Informationsselektion. Klar, an vielen Stellen könnte man noch mehr Schreiben, aber die Autoren setzen sehr gute Prioritäten zwischen wichtigen und unwichtigen Informationen.  Somit wird das Lesen an keiner Stelle langweilig und man kann rasche Fortschritte erzielen.</p>
<p>Um jetzt nicht des Lobbyismus für O'Reilly beschuldigt zu werden: Ja es gibt auch ein paar kleine Fehler die sich im Buch eingeschlichen haben. Davon ist allerdings lediglich einer frustrierend wenn es um die Sortierung von Model results geht, da wird an einer Stelle ein falscher parameter verwendet. Die restlichen Fehler haben eher kosmetische Dimensionen und tun dem Verständnis keinen Abbruch (zumal es sich wirklich um lediglich 3-4 handelt).</p>
<p>Nichts desto trotz: Wer des Deutschen mächtig ist und sich selbst oder einem Kollegen CakePHP näher bringen möchte sollte unbedingt <a href="http://www.amazon.de/s/ref=nb_ss_w/028-2190767-6445327?field-keywords=webentwicklung%20mit%20cakephp&__mk_de_DE=%C5M%C5Z%D5%D1&url=search-alias%3Daps">zugreifen</a>. Bei "Webentwicklung mit CakePHP" handelt es sich wirklich um ein außergewöhnliches Programmierbuch wo fast jedes Kapitel für sich den Kauf rechtfertigen kann.</p>
<p>-- Felix Geisendörfer aka the_undefined</p>
<p>PS: I have met Robert, one of the authors twice. He did however not even bother to bribe me with a beer so far (even when Tim and I visited him for Oktoberfest in Munich) so trust me if I say that I truly enjoyed reading this book and my endorsement for it comes from heart.<br />
<img style="display: none;" src="http://debuggable.com/posts/tick/4912dccb-f594-4fa1-af20-6c564834cda3"></p>
	</div>
	<div class="clear">&nbsp;</div>
	<div class="social">
	<p class="subscribe">Did you like this blog post? If so, please consider <a href="http://feeds.feedburner.com/debuggable">subscribing to the Blog RSS feed</a>.</p>

	<ul>
	<li class="sociablefirst">
				<a class="linkedin" title="LinkedIn" href="javascript:window.location='http://www.linkedin.com/shareArticle?mini=true&amp;url=http%3A%2F%2Fdebuggable.com%2Fposts%2Fbuch-tip-webentwicklung-mit-cakephp%3A4912dccb-f594-4fa1-af20-6c564834cda3 &amp;title=Buchtipp%3A+Webentwicklung+mit+CakePHP';" rel="nofollow">
			<img class="sociable-hovers" alt="Linked In" title="Linked In" src="/img/social_icons/linkedin.png"/>
		</a>
	</li>
	<li>
		<a class="sphinn" title="Sphinn" href="javascript:window.location='http://sphinn.com/index.php?c=post&amp;m=submit&amp;link=http%3A%2F%2Fdebuggable.com%2Fposts%2Fbuch-tip-webentwicklung-mit-cakephp%3A4912dccb-f594-4fa1-af20-6c564834cda3';" rel="nofollow">
		<img class="sociable-hovers" alt="Sphinn" title="Sphinn" src="/img/social_icons/sphinn.png"/>
		</a>
	</li>
	<li>
		<a class="digg" title="Digg" href="javascript:window.location='http://digg.com/submit?url=http%3A%2F%2Fdebuggable.com%2Fposts%2Fbuch-tip-webentwicklung-mit-cakephp%3A4912dccb-f594-4fa1-af20-6c564834cda3&amp;title=Buchtipp%3A+Webentwicklung+mit+CakePHP&amp;bodytext=+..&amp;media=News&amp;topic=Programming';" rel="nofollow">
		<img class="sociable-hovers" alt="Digg" title="Digg" src="/img/social_icons/digg.png"/>
		</a>
	</li>
	<li>
	<a class="del.icio.us" title="del.icio.us" href="javascript:window.location='http://delicious.com/post?url=http%3A%2F%2Fdebuggable.com%2Fposts%2Fbuch-tip-webentwicklung-mit-cakephp%3A4912dccb-f594-4fa1-af20-6c564834cda3&amp;title=Buchtipp%3A+Webentwicklung+mit+CakePHP';" rel="nofollow">
		<img class="sociable-hovers" alt="Delicious" title="Delicious" src="/img/social_icons/delicious.png"/>
	</a>
	</li>
	<li class="sociablelast">
		<a class="stumbleupon" title="StumbleUpon" href="javascript:window.location='http://www.stumbleupon.com/submit?url=http%253A%252F%252Fyoast.com%252F40-wordpress-optimisation-tips%252F&amp;title=40%2520WordPress%2520Optimisation%2520tips';" rel="nofollow">
		<img class="sociable-hovers" alt="StumbleUpon" title="StumbleUpon" src="/img/social_icons/stumbleupon.png"/>
		</a>
	</li>
	</ul>
</div>

	
	<div class="post-footer">
		<img src="/css/img/comments.png" alt="Comments"> <a href="/posts/buch-tip-webentwicklung-mit-cakephp:4912dccb-f594-4fa1-af20-6c564834cda3">8 Comments</a> &nbsp; | &nbsp; 
		<img src="/css/img/add_comment.png" alt="Add Comment"> <a href="/posts/buch-tip-webentwicklung-mit-cakephp:4912dccb-f594-4fa1-af20-6c564834cda3#CommentAddForm">Add Comment</a>	</div>
	</div>
<div class="post">
	<h2><a href="/posts/unix-is-love:4910acf5-4914-46b2-bd75-46954834cda3">Unix is love</a></h2>	<div class="posted-on">
		<p>Posted on 4/11/08 by 
		<a href="/felix">Felix Geisendörfer</a>				</p>
		<div class="thumb">
			<img alt="" src="/img/felix_thumb.jpg"/>		</div>
	</div>
	<div class="body">
				<pre class="terminal">git ci -m "Updated sidebar" && git push && deploy blog && say "Done"</pre>
<p>No, this is not pseudo code. I just ran this : ).</p>
<p>Also read the previous <a href="http://debuggable.com/posts/use-the-terminal:48c67144-9984-447b-a75a-14b14834cda3">"use the terminal"</a> post.</p>
<p>-- Felix Geisendörfer aka the_undefined</p>
<p><img style="display: none;" src="http://debuggable.com/posts/tick/4910acf5-4914-46b2-bd75-46954834cda3"></p>
	</div>
	<div class="clear">&nbsp;</div>
	<div class="social">
	<p class="subscribe">Did you like this blog post? If so, please consider <a href="http://feeds.feedburner.com/debuggable">subscribing to the Blog RSS feed</a>.</p>

	<ul>
	<li class="sociablefirst">
				<a class="linkedin" title="LinkedIn" href="javascript:window.location='http://www.linkedin.com/shareArticle?mini=true&amp;url=http%3A%2F%2Fdebuggable.com%2Fposts%2Funix-is-love%3A4910acf5-4914-46b2-bd75-46954834cda3 &amp;title=Unix+is+love';" rel="nofollow">
			<img class="sociable-hovers" alt="Linked In" title="Linked In" src="/img/social_icons/linkedin.png"/>
		</a>
	</li>
	<li>
		<a class="sphinn" title="Sphinn" href="javascript:window.location='http://sphinn.com/index.php?c=post&amp;m=submit&amp;link=http%3A%2F%2Fdebuggable.com%2Fposts%2Funix-is-love%3A4910acf5-4914-46b2-bd75-46954834cda3';" rel="nofollow">
		<img class="sociable-hovers" alt="Sphinn" title="Sphinn" src="/img/social_icons/sphinn.png"/>
		</a>
	</li>
	<li>
		<a class="digg" title="Digg" href="javascript:window.location='http://digg.com/submit?url=http%3A%2F%2Fdebuggable.com%2Fposts%2Funix-is-love%3A4910acf5-4914-46b2-bd75-46954834cda3&amp;title=Unix+is+love&amp;bodytext=preclassterminalgitcimUpdatedsidebargitpushdeployblogsayDonepreNothisisnotpseudocodeIjustranthisAlsoreadthepreviousahrefhttpdebuggablecompostsusetheterminal48c671449984447ba75a14b14834cda3usetheterminalapostFelixGeisendrferakatheundefinedimgstyledisplaynonesrchttpdebuggablecompoststick4910acf5491446b2bd7546954834cda3&amp;media=News&amp;topic=Programming';" rel="nofollow">
		<img class="sociable-hovers" alt="Digg" title="Digg" src="/img/social_icons/digg.png"/>
		</a>
	</li>
	<li>
	<a class="del.icio.us" title="del.icio.us" href="javascript:window.location='http://delicious.com/post?url=http%3A%2F%2Fdebuggable.com%2Fposts%2Funix-is-love%3A4910acf5-4914-46b2-bd75-46954834cda3&amp;title=Unix+is+love';" rel="nofollow">
		<img class="sociable-hovers" alt="Delicious" title="Delicious" src="/img/social_icons/delicious.png"/>
	</a>
	</li>
	<li class="sociablelast">
		<a class="stumbleupon" title="StumbleUpon" href="javascript:window.location='http://www.stumbleupon.com/submit?url=http%253A%252F%252Fyoast.com%252F40-wordpress-optimisation-tips%252F&amp;title=40%2520WordPress%2520Optimisation%2520tips';" rel="nofollow">
		<img class="sociable-hovers" alt="StumbleUpon" title="StumbleUpon" src="/img/social_icons/stumbleupon.png"/>
		</a>
	</li>
	</ul>
</div>

	
	<div class="post-footer">
		<img src="/css/img/comments.png" alt="Comments"> <a href="/posts/unix-is-love:4910acf5-4914-46b2-bd75-46954834cda3">3 Comments</a> &nbsp; | &nbsp; 
		<img src="/css/img/add_comment.png" alt="Add Comment"> <a href="/posts/unix-is-love:4910acf5-4914-46b2-bd75-46954834cda3#CommentAddForm">Add Comment</a>	</div>
	</div>
<div class="paging">
	<a href="/posts/index/page:18" class="prev">&laquo; Previous</a> <span><a href="/posts/index/page:15">15</a></span> | <span><a href="/posts/index/page:16">16</a></span> | <span><a href="/posts/index/page:17">17</a></span> | <span><a href="/posts/index/page:18">18</a></span> | <span class="current">19</span> | <span><a href="/posts/index/page:20">20</a></span> | <span><a href="/posts/index/page:21">21</a></span> | <span><a href="/posts/index/page:22">22</a></span> | <span><a href="/posts/index/page:23">23</a></span> <a href="/posts/index/page:20" class="next">Next &raquo;</a></div>	
</div>
<div class="grid_4 prefix_1 omega" id="sidebar">
	<cake:nocache>
			</cake:nocache>

	<h3>RSS Feeds</h3>
	<div id="bug">
		<img src="/img/rss_bug.png" alt="" />	</div>
	<div class="rss">
		<p class="bug-message"></p>
		<a href="http://feeds.feedburner.com/debuggable">Blog RSS</a><br/>
		<a href="http://feeds.feedburner.com/debuggable-comments">Comments RSS</a><br/><br/>
		<img width="88" height="26" alt="" style="border: 0pt none ;" src="http://feeds.feedburner.com/~fc/debuggable?bg=FF9933&amp;fg=444444&amp;anim=0"/>
		<div class="clear"></div>
	</div>

	<h3>Recent Posts</h3>
	<ul>
<li class=""><a href="/posts/releasing-node-mysql-2-0-0-alpha:4fb21c18-7f84-4e8c-a1ef-599bcbdd56cb">Releasing node-mysql 2.0.0-alpha</a></li><li class=""><a href="/posts/how-to-write-jquery-plugins:4f72ab2e-7310-4a74-817a-0a04cbdd56cb">How to write jQuery plugins</a></li><li class=""><a href="/posts/vim-workshop-in-berlin-april-20:4f702b83-ce24-429c-9403-0e39cbdd56cb">Vim Workshop in Berlin (April 20)</a></li><li class=""><a href="/posts/npm-an-intervention:4f44dd25-a114-4361-ada1-6cefcbdd56cb">NPM - An intervention</a></li><li class="active"><a href="/posts/testing-node-js-modules-with-travis-ci:4ec62298-aec4-4ee3-8b5a-2c96cbdd56cb">Testing node.js modules with Travis CI</a></li><li class=""><a href="/posts/private-npm-modules:4e68cc7d-1ac4-42d9-995a-343dcbdd56cb">Private npm modules</a></li></ul>
	<h3>Archive</h3>
	<p class="small align">
		<strong>443 Posts</strong>, <strong>4608 Comments</strong><br /><br />
		We are on air since 2006. Take a tour through the
		<a href="/posts/archive">blog archive</a>.
	</p>
	<div class="search">
	<form id="PostSearchForm" method="post" action="/posts/search"><fieldset style="display:none;"><input type="hidden" name="_method" value="POST" /></fieldset><input name="data[Post][keywords]" type="text" value="" id="PostKeywords" /><input type="submit" class="button" value="Search" /></form>	<div class="clear"></div>
</div>
	<h3>Recent Comments</h3>
	<div class="recent-comments">
		<div class="comment"><a href="http://en.gravatar.com/site/signup" class="gravatar"><img src="http://www.gravatar.com/avatar.php?gravatar_id=23968f0ca75b13463d2db5343e5c2096&size=15&rating=R&d=identicon" alt="" /></a><a href="/posts/releasing-node-mysql-2-0-0-alpha:4fb21c18-7f84-4e8c-a1ef-599bcbdd56cb#comment-4fd32b85-220c-4fc8-84b2-378fcbdd56cb">William: thanks, fixed ..</a></div><div class="clear_left"></div><div class="comment"><a href="http://en.gravatar.com/site/signup" class="gravatar"><img src="http://www.gravatar.com/avatar.php?gravatar_id=b47010beec892f11619d1e81f0c94f11&size=15&rating=R&d=identicon" alt="" /></a><a href="/posts/releasing-node-mysql-2-0-0-alpha:4fb21c18-7f84-4e8c-a1ef-599bcbdd56cb#comment-4fd30119-06fc-4712-aecd-7fa5cbdd56cb">Hi Felix,

The Upgra ..</a></div><div class="clear_left"></div><div class="comment"><a href="http://en.gravatar.com/site/signup" class="gravatar"><img src="http://www.gravatar.com/avatar.php?gravatar_id=99b59e8a9cfe2c5575f0fa90f7f30307&size=15&rating=R&d=identicon" alt="" /></a><a href="/posts/how-to-write-jquery-plugins:4f72ab2e-7310-4a74-817a-0a04cbdd56cb#comment-4f99a4a2-9ad8-4476-b208-611acbdd56cb">Maybe you can write so ..</a></div><div class="clear_left"></div><div class="comment"><a href="http://en.gravatar.com/site/signup" class="gravatar"><img src="http://www.gravatar.com/avatar.php?gravatar_id=8364689a1eefb5eceb6a4f38bbf95731&size=15&rating=R&d=identicon" alt="" /></a><a href="/posts/how-to-write-jquery-plugins:4f72ab2e-7310-4a74-817a-0a04cbdd56cb#comment-4f9651b9-eb88-4096-94c1-0fc2cbdd56cb">This is very nice plug ..</a></div><div class="clear_left"></div><div class="comment"><a href="http://en.gravatar.com/site/signup" class="gravatar"><img src="http://www.gravatar.com/avatar.php?gravatar_id=7e3d69d16d3b845e89198512355b2ac9&size=15&rating=R&d=identicon" alt="" /></a><a href="/posts/how-to-write-jquery-plugins:4f72ab2e-7310-4a74-817a-0a04cbdd56cb#comment-4f8bb75a-96cc-4197-8e93-7c63cbdd56cb">Nice article!

Somet ..</a></div><div class="clear_left"></div><div class="comment"><a href="http://en.gravatar.com/site/signup" class="gravatar"><img src="http://www.gravatar.com/avatar.php?gravatar_id=e57a2bc121063a81e8e6a04aa85cc54f&size=15&rating=R&d=identicon" alt="" /></a><a href="/posts/how-to-write-jquery-plugins:4f72ab2e-7310-4a74-817a-0a04cbdd56cb#comment-4f83326b-8c28-43fc-b70d-097ecbdd56cb">That&#039;s fine ognian, th ..</a></div><div class="clear_left"></div><div class="comment"><a href="http://en.gravatar.com/site/signup" class="gravatar"><img src="http://www.gravatar.com/avatar.php?gravatar_id=994516a664c2bdc728d18c47e935bc14&size=15&rating=R&d=identicon" alt="" /></a><a href="/posts/how-to-write-jquery-plugins:4f72ab2e-7310-4a74-817a-0a04cbdd56cb#comment-4f832a25-5818-4d38-9e39-097ecbdd56cb">Really nice work! I wa ..</a></div><div class="clear_left"></div><div class="comment"><a href="http://en.gravatar.com/site/signup" class="gravatar"><img src="http://www.gravatar.com/avatar.php?gravatar_id=e57a2bc121063a81e8e6a04aa85cc54f&size=15&rating=R&d=identicon" alt="" /></a><a href="/posts/how-to-write-jquery-plugins:4f72ab2e-7310-4a74-817a-0a04cbdd56cb#comment-4f7c15ca-c7c4-48e3-a4db-27decbdd56cb">@Jörn: Sorry, thought  ..</a></div><div class="clear_left"></div><div class="comment"><a href="http://en.gravatar.com/site/signup" class="gravatar"><img src="http://www.gravatar.com/avatar.php?gravatar_id=d5d83832be2b6c70d1968635f68a1b4a&size=15&rating=R&d=identicon" alt="" /></a><a href="/posts/how-to-write-jquery-plugins:4f72ab2e-7310-4a74-817a-0a04cbdd56cb#comment-4f7c11aa-6f9c-448c-abdb-2066cbdd56cb">Thanks didn&#039;t quite un ..</a></div><div class="clear_left"></div><div class="comment"><a href="http://en.gravatar.com/site/signup" class="gravatar"><img src="http://www.gravatar.com/avatar.php?gravatar_id=e57a2bc121063a81e8e6a04aa85cc54f&size=15&rating=R&d=identicon" alt="" /></a><a href="/posts/how-to-write-jquery-plugins:4f72ab2e-7310-4a74-817a-0a04cbdd56cb#comment-4f7bf934-d4e8-4885-9a2c-7a93cbdd56cb">Well you could expose  ..</a></div><div class="clear_left"></div>	</div>
	<div class="clear_left"></div>
	<h3>Keep an eye on</h3>
<ul class="links external">
	<li><a href="http://transloadit.com" title="Video encoding, image resizing and more for your web or mobile app">Transloadit</a></li><li><a href="http://tus.io" title="Resumable file uploading, upload progress bar, faster upload speed">tus - resumable file upload protocol</a></li><li><a href="http://kevin.vanzonneveld.net/">Kevin van Zonneveld</a></li><li><a href="http://www.littlehart.net/atthekeyboard/">Chris Hartjes</a></li><li><a href="http://mark-story.com">Mark Story</a></li><li><a href="http://www.webbosaurus.de">Webbosaurus</a></li></ul>
	<a href='https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Number' title='JavaScript JS Documentation: JS Number Example: Using the Number object to assign values to numeric variables, JavaScript Number Example: Using the Number object to assign values to numeric variables'><img src='http://static.jsconf.us/promotejshs.png' height='150' width='180' alt='JavaScript JS Documentation: JS Number Example: Using the Number object to assign values to numeric variables, JavaScript Number Example: Using the Number object to assign values to numeric variables'/></a>
</div>

						<div class="clear">&nbsp;</div>
		</div>

		<div id="footer">
			<div class="container_16">
				<ul id="footer_navigation">
					<ul>
<li class="active"><a href="/blog">Blog</a></li><li class=""><a href="/">About</a></li></ul>				</ul>
				<p>&copy; 2008 - 2015, Debuggable Ltd. All rights reserved.
				<i>Designed by <a href="http://www.fluidcore.net" target="_blank">fluidCORE</a>.</i>
			</div>
		</div>
	</div>
	<script type="text/javascript" src="/js/aggregate/58a4727fb2207154ddd0739cbc3b15104ad6cd03/5627ea2806458e56fb8a5f4b231a44c2.php"></script><script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-3306079-3']);
_gaq.push(['_trackPageview']);
(function() {
var ga = document.createElement('script');
ga.src = ('https:' == document.location.protocol ?
    'https://ssl' : 'http://www') +
    '.google-analytics.com/ga.js';
ga.setAttribute('async', 'true');
document.documentElement.firstChild.appendChild(ga);
})();
</script></body>
</html>
